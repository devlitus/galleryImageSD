---
import IconsSun from "./IconSun.astro";
import IconMoon from "./IconMoon.astro";
---

<header class="bg-white dark:bg-gray-900 transition-colors duration-200">
  <div class="flex justify-end p-4 items-center">
    <a class="text-white mr-5" href="/">Gallery</a>
    <a class="text-white mr-5" href="/upload">Upload</a>
    <button
      id="themeToggle"
      class="p-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"
    >
      <span id="themeIcon" class="block w-6 h-6">
        <IconsSun />
        <IconMoon />
      </span>
    </button>
  </div>
</header>
<script>
  const handleThemeToggle = (e: Event) => {
    e.stopPropagation();
    document.documentElement.classList.toggle("dark");
    localStorage.setItem(
      "theme",
      document.documentElement.classList.contains("dark") ? "dark" : "light"
    );
  };

  document
    .getElementById("themeToggle")
    ?.addEventListener("click", handleThemeToggle);

  const theme =
    localStorage.getItem("theme") ||
    (window.matchMedia("(prefers-color-scheme: dark)").matches
      ? "dark"
      : "light");

  if (theme === "dark") {
    document.documentElement.classList.add("dark");
  }
</script>
